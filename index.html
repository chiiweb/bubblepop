<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>bubble pop extreme!! ‚ú®</title>
  <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;circle cx='50' cy='50' r='45' fill='%23ff6b9d'/&gt;&lt;circle cx='35' cy='35' r='8' fill='%23ffffff' opacity='0.6'/&gt;&lt;/svg&gt;">
  <style>
  :root{ --bg:#ff6b9d; --panel:#ffffff22; --accent:#ffd86b; --muted:rgba(255,255,255,0.85); }
  html,body{ height:100%; margin:0; background: linear-gradient(180deg,#ff6b9d 0%, #c44569 60%, #a29bfe 100%); font-family:'Comic Sans MS',cursive,system-ui; color:white; -webkit-user-select:none; user-select:none; overflow:hidden; font-size:16px;}
  #gameWrap{ position:relative; width:100%; height:100vh; display:flex; align-items:stretch; justify-content:center; }
  canvas{ display:block; background:transparent; width:100%; height:100%; touch-action:none; }
  #hud{ position:absolute; top:12px; left:12px; right:12px; display:flex; gap:8px; justify-content:space-between; pointer-events:none; z-index:30; flex-wrap:wrap;}
  .panel{ background:linear-gradient(180deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05)); border-radius:16px; padding:10px 14px; font-weight:700; font-size:15px; display:inline-flex; gap:8px; align-items:center; pointer-events:auto; backdrop-filter:blur(8px); box-shadow:0 4px 12px rgba(0,0,0,0.15);}
  #controlsMobile{ position:absolute; bottom:18px; left:0; right:0; display:flex; justify-content:space-between; align-items:center; padding:0 18px; z-index:40; pointer-events:none; }
  .btn{ pointer-events:auto; -webkit-tap-highlight-color: rgba(0,0,0,0); background:rgba(255,255,255,0.15); backdrop-filter:blur(8px); border:3px solid rgba(255,255,255,0.3); color:white; width:68px; height:68px; border-radius:16px; display:flex; align-items:center; justify-content:center; font-size:28px; user-select:none; touch-action:none; transition:transform .08s ease; box-shadow:0 6px 20px rgba(0,0,0,0.2); font-weight:900;}
  .btn:active{ transform: scale(.92); }
  #leftGroup{ display:flex; gap:12px; align-items:center; }
  #rightGroup{ display:flex; gap:12px; align-items:center; }
  #modal{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); background:linear-gradient(180deg, rgba(255,107,157,0.95), rgba(196,69,105,0.95)); backdrop-filter:blur(12px); border-radius:20px; padding:24px; text-align:center; z-index:50; display:none; min-width:280px; max-width:90%; max-height:90vh; overflow-y:auto; box-shadow:0 12px 40px rgba(0,0,0,0.35); border:3px solid rgba(255,255,255,0.3);}
  #modal h2{ margin:0 0 12px 0; font-size:32px; text-shadow:2px 2px 8px rgba(0,0,0,0.3); }
  #modal button{ margin-top:16px; padding:12px 24px; border-radius:16px; border:none; background:linear-gradient(135deg, #ffd86b, #ffaa00); color:#333; font-weight:900; font-size:18px; cursor:pointer; transition:transform 0.1s; box-shadow:0 4px 12px rgba(0,0,0,0.25);}
  #modal button:active{ transform:scale(0.95); }
  #leader{ margin-top:12px; text-align:left; font-size:14px; color:var(--muted); background:rgba(0,0,0,0.15); padding:12px; border-radius:12px; }
  .joystick{
    position:absolute;
    bottom:18px;
    left:18px;
    width:140px;
    height:140px;
    border-radius:50%;
    z-index:41;
    display:flex;
    align-items:center;
    justify-content:center;
    pointer-events:auto;
    touch-action:none;
  }
  .joy-base{
    width:100%;
    height:100%;
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(8px);
    border:3px solid rgba(255,255,255,0.25);
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 6px 20px rgba(0,0,0,0.2);
  }
  .joy-knob{
    width:56px;
    height:56px;
    border-radius:50%;
    background:linear-gradient(135deg,#ffffff,#ffffffaa);
    display:block;
    transform:translate(0,0);
    box-shadow:0 6px 18px rgba(0,0,0,0.35);
    border:2px solid rgba(255,255,255,0.5);
  }
  @media (min-width:900px){ .joystick{ display:none; } .hidden-desktop{ display:none; } }
  @media (max-width:900px){ .hidden-mobile{ display:none; } }
  .topRightControls{ display:flex; gap:8px; align-items:center; pointer-events:auto; flex-wrap:wrap; }
  .topRightControls label{ display:flex; align-items:center; gap:4px; font-size:13px; font-weight:700; cursor:pointer; }
  input[type="checkbox"]{ cursor:pointer; width:18px; height:18px; }
  #username{ width:100%; padding:12px; border-radius:12px; border:3px solid rgba(255,255,255,0.3); background:rgba(255,255,255,0.15); color:white; font-size:16px; font-weight:700; text-align:center; margin:12px 0; outline:none; font-family:inherit;}
  #username::placeholder{ color:rgba(255,255,255,0.6); }
  .star-particle{ position:absolute; pointer-events:none; animation:float-up 2s ease-out forwards; z-index:100; }
  @keyframes float-up{ 0%{opacity:1; transform:translateY(0) scale(1);} 100%{opacity:0; transform:translateY(-100px) scale(0.3);} }
  </style>
</head>
<body>
  <div id="gameWrap">
    <canvas id="gameCanvas"></canvas>
    <audio id="gameMusic" src="stargame.mp3" loop preload="auto"></audio>
    <div id="hud">
      <div class="panel">
        score: <span id="score">0</span> | <span id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <div class="panel">
          level: <span id="level">1</span>
        </div>
        <div class="panel">
          high: <span id="high">0</span>
        </div>
        <div class="panel topRightControls">
          <label>sfx <input id="toggleSound" type="checkbox" checked></label> <label>music <input id="toggleMusic" type="checkbox" checked></label>
        </div>
      </div>
    </div>
    <div id="controlsMobile">
      <div id="leftGroup">
        <button id="btnLeft" class="btn">‚óÄ</button> <button id="btnRight" class="btn">‚ñ∂</button>
      </div>
      <div id="rightGroup">
        <button id="btnAction" class="btn">üéØ</button>
      </div>
    </div>
    <div class="joystick" id="joystick">
      <div class="joy-base" id="joyBase">
        <div class="joy-knob" id="joyKnob"></div>
      </div>
    </div>
    <div id="modal">
      <h2 id="modalTitle">game over!! üíñ</h2>
      <div id="modalText">
        final score: <strong id="modalScore">0</strong>
      </div>
      <div id="leader"></div><button id="btnRestart">play again!! ‚ú®</button>
    </div>
  </div>
  <script src="game.js"></script>
</body>
</html>
